# Smush-LUT
<img src="https://raw.githubusercontent.com/ScanMountGoat/Smush-LUT/master/neutral.png" height="auto" width="100%">  

Create color grading 3D LUTs for Smash Ultimate. Learn more about how these textures work and the effects that can be achieved on the [color grading lut](https://scanmountgoat.github.io/Smush-Material-Research/post_processing/colorgradinglut/) page of the Smash Ultimate Material Research website. A windows executable is available in [Releases](https://github.com/ScanMountGoat/Smush-LUT/releases).

## Usage Instructions
1. Find a screenshot of the stage to edit.
2. Edit the screenshot in an image editor like Photoshop, Gimp, etc. Only use adjustments or layers that affect the entire image such as levels, curves, exposure, gradient maps, etc. The LUT can't store the changes in the image made by brushes or image overlays. 
3. Apply the same changes made to the screenshot to the [neutral.png](https://github.com/ScanMountGoat/Smush-LUT/blob/master/neutral.png) file included in this repository. Some programs allow dragging adjustment layers between files or making the LUT its own layer and exporting just that layer to make this step easier.
3. Drag the edited LUT PNG image onto `smush_lut.exe` to create a nutexb from the edits made to the neutral LUT. Rename this file to `color_grading_lut.nutexb`.  
4. Replace the stage's `color_grading_lut.nutexb` with the one generated by `smush_lut.exe`. The file size will be 1:1 with the original, so there usually won't be any issues compressing it to the correct size. Most edits to 8 bit images introduce some subtle banding artifacts, which also helps with compression.
5. Check the results in game. The results may not match exactly due to the limited resolution of the LUT or errors in the color compensation step. Passing the `--raw` flag from the command line disables this compensation step but will result in inaccurate colors.


## Previewing Color Grading LUTs
Convert the LUT to a 16x16x16 .cube file using the executable. 
Example: `smush_lut.exe sepia.png sepia.cube` or `smush_lut.exe sepia.nutexb sepia.cube`. 
Cube files can be opened in many video editing and image editing software. Photoshop and Affinity Photo support important and exporting LUTs as .cube files. Other image editing software may have plugins that support .cube files. 

### Photoshop (CS6 or later)
Create a new color lookup adjustment layer by clicking the adjustment layer icon on the layers panel and selecting "Color Lookup". 
Click the "Load 3D LUT" dropdown and then click "Load 3D LUT" again to open a file dialog to select the .cube file exported earlier. Leave the color channel settings at default. 

### Affinity Photo 
Similar to Photoshop, create a new LUT adjustment layer by clicking the adjustment layer icon and selecting "LUT". Click "Load LUT" and select the .cube file exported earlier. 
